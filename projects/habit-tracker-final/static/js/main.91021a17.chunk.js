(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,a){e.exports=a(91)},62:function(e,t,a){},63:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),i=a.n(s),o=(a(62),a(63),a(16)),l=a(17),c=a(22),d=a(18),p=a(23),u=a(19),h=a(64);a(65);h.initializeApp({apiKey:"AIzaSyBczyXF8LB_35hI6awLk4lyYfjNPzN5bIo",authDomain:"habit-tracker-ade9c.firebaseapp.com",databaseURL:"https://habit-tracker-ade9c.firebaseio.com",projectId:"habit-tracker-ade9c",storageBucket:"habit-tracker-ade9c.appspot.com",messagingSenderId:"552514933256",appId:"1:552514933256:web:24f0cee2d4931841"});var m=h,f=a(95),b=a(96),g=a(93),y=a(94),v=a(97),k=a(100),w=a(99),E=a(20),x=a(98),D=a(24),C=a.n(D),S=a(53),j=a.n(S);function I(){var e=Object(u.a)(["\nborder-radius: 5px;\n.col {\n\tmargin: 2px;\n\tcursor: pointer;\n\tuser-select: none;\n}\n.fa {\n\tdisplay: none\n}\n.task {\n\tborder: 1px solid #E0DCE2;\n\twidth: 25px;\n\theight: 25px;\n\tflex: 0 0 25px;\n\tpadding: 0;\n\ttransition: background ease-in-out .09s\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t\tcolor: #000;\n\t}\n}\n.taskDone.col{\n\tcolor: white;\n\tbackground: #28a745;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t}\n}\n.habit-title {\n\tdisplay: inline-block;\n\tmax-width: 80%;\n\tborder: 2px solid transparent;\n}\n.habit-btns {\n\tfloat: right;\n\tcolor: #ddd;\n}\n.input-title {\n\tmargin-left: -7px;\n\tpadding-left: 8px;\n\toutline: none;\n\tborder: 1px solid #007bff;\n\twidth: 75%;\n\tfont-weight: bold;\n}\n"]);return I=function(){return e},e}var N=E.a.div(I()),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).getDaysArrayByMonth=function(){for(var e=C()().daysInMonth(),t=[];e;){var a=C()().date(e);t.push(a.format("DD-MM-YYYY")),e--}return t.reverse()},a.handleClick=function(e){e.preventDefault(),"task taskDone col"===e.target.className?(a.subtractPoint(),a.removeDate(e),e.target.className="task col"):"task col"===e.target.className&&(a.addPoint(),a.addDate(e),e.target.className="task taskDone col")},a.addDate=function(e){var t=m.database().ref("habits/"+a.props.newid).child("dates"),n=e.target.dataset.date;t.push().set({pushDate:n})},a.removeDate=function(e){var t=m.database().ref("habits/"+a.props.newid).child("dates"),n=e.target.dataset.key;t.child(n).remove(),a.updatePercentage()},a.addPoint=function(){var e=m.database().ref("habits/"+a.props.newid);a.props.points>=0&&a.props.points<=a.state.daysInMonth.length-1&&e.update({habitPoints:a.props.points+1}),a.updatePercentage()},a.updatePercentage=function(e){var t=m.database().ref("habits/"+a.props.newid);t.once("value",function(e){var n=e.child("habitPoints").val(),r=a.changeIntoPercentage(n,30);t.update({percentage:r})})},a.subtractPoint=function(e){var t=m.database().ref("habits/"+a.props.newid+"/");0!==a.props.points&&t.update({habitPoints:a.props.points-1})},a.getDates=function(){if(m.database().ref("habits/"+a.props.newid+"/dates").once("value",function(e){var t=[];e.forEach(function(e){void 0!==e.val().pushDate&&t.push(e.val().pushDate)}),a.setState({arrDates:t})}),void 0!==a.state.dates)a.state.dates.map(function(e){return C()(e).format("DD-MM-YYYY")})},a.changeIntoPercentage=function(e,t){return Math.ceil(100*e/t)},a.editTitle=function(e){a.state.editingTask?a.setState({editingTask:!1}):a.setState({editingTask:!0})},a.saveTitle=function(e){0!=a.state.input.length?(m.database().ref("habits/"+a.props.newid+"/").update({habitTitle:a.state.input}),a.setState({editingTask:!1}),a.setState({error:!1})):a.setState({error:!0})},a.deleteHabit=function(e){m.database().ref("habits/"),m.database().ref("habits/"+a.props.newid).remove()},a.askToConfirm=function(){a.setState({show:!0})},a.confirm=function(){a.setState({confirmed:!0}),a.setState({show:!1}),a.deleteHabit()},a.handleClose=function(){a.setState({show:!1})},a.handleChange=function(e){a.setState({input:e.target.value})},a.state={daysInMonth:[],currentMonth:"",arrDates:[],oldDates:{},dates:a.props.dates,editingTask:!1,input:a.props.title,currentHabits:a.props.habits,confirmed:!1,show:!1,error:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){console.log(this.state.editingTask)}},{key:"componentWillMount",value:function(){var e=this.getDaysArrayByMonth(),t=this.getDates();this.setState({daysInMonth:e,arrDates:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingTask,n=t.error;return r.a.createElement(N,{className:"col-md-6 col-sm-12",style:{padding:"20px",border:"1px solid #ddd",margin:"10px -10px",background:"#fff"}},r.a.createElement("div",{style:{textAlign:"left",minHeight:"30px"}},r.a.createElement("p",{style:{fontWeight:"bold",marginBottom:"5px"}},!a&&r.a.createElement("span",{className:"habit-title"},this.props.title),a&&r.a.createElement("input",{type:"text",className:n?"input-title error":"input-title",ref:function(e){return e&&e.focus()},value:this.state.input,onChange:this.handleChange,onKeyPress:function(t){"Enter"===t.key&&e.saveTitle()}}),r.a.createElement("span",{className:"habit-btns"},a?r.a.createElement(w.a,{variant:"light mr-2",size:"sm",onClick:this.saveTitle,title:"zapisz"},r.a.createElement("i",{class:"fas fa-check"})):r.a.createElement(w.a,{variant:"light mr-2",size:"sm",onClick:this.editTitle,title:"edytuj tytu\u0142"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(w.a,{variant:"light",size:"sm",onClick:this.askToConfirm,title:"usu\u0144"},r.a.createElement("i",{className:"far fa-trash-alt"})))),r.a.createElement(x.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(x.a.Header,{closeButton:!0},r.a.createElement(x.a.Title,null,"Potwierd\u017a usuni\u0119cie")),r.a.createElement(x.a.Body,null,"Czy na pewno chcesz usun\u0105\u0107 ten nawyk?"),r.a.createElement(x.a.Footer,null,r.a.createElement(w.a,{variant:"secondary",onClick:this.handleClose},"Anuluj"),r.a.createElement(w.a,{variant:"danger",onClick:this.confirm},"Tak")))),r.a.createElement(g.a,null,r.a.createElement(y.a,{md:6,sm:12},r.a.createElement("div",{style:{minWidth:"205px",flexWrap:"wrap",alignItems:"center",display:"flex"}},this.state.daysInMonth.map(function(t,a){if(!e.props.dates.includes(t))return r.a.createElement(y.a,{className:"task","data-date":t,id:"task_"+e.props.id+"_"+t,key:t,onClick:e.handleClick,style:{border:"1px solid #28a745"}},a+1);for(var n in e.props.oldDates)if(e.props.oldDates[n].pushDate===t)return r.a.createElement(y.a,{className:"task taskDone","data-key":n,"data-date":t,newid:"task_"+e.props.newid+"_"+t,key:t,onClick:e.handleClick,style:{border:"1px solid #28a745 "}},a+1)}))),r.a.createElement(y.a,{md:6,sm:12,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("p",null,"Post\u0119p:"),r.a.createElement(j.a,{data:[{value:this.props.percentage,color:"#28a745",startOffset:0}],cy:50,cx:50,totalValue:100,lineWidth:20,startAngle:270,rounded:!0,label:function(e){var t=e.data,a=e.dataIndex;return Math.round(t[a].percentage)+"%"},labelStyle:{fontSize:"25px",fontFamily:"sans-serif"},labelPosition:0,style:{width:"100px",height:"100px",margin:"10px"}}),r.a.createElement("p",null,this.props.points,"/30"))))}}]),t}(n.Component);function z(){var e=Object(u.a)(["\n.col {\n\tmargin: 2px;\n\tcursor: pointer;\n\tuser-select: none;\n}\n\n.task {\n\tborder: 1px solid #E0DCE2;\n\twidth: 25px;\n\theight: 25px;\n\tflex: 0 0 25px;\n\tpadding: 0;\n}\n\n.calendar {\n\tcursor: default\n}\n.error {\n\tborder-color: red\n}\n"]);return z=function(){return e},e}var M=E.a.div(z()),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).setHabits=function(){m.database().ref("habits").on("value",function(e){a.setState({loading:!1});var t=e.val(),n=[];for(var r in t)n.push({idkey:r,id:t[r].habitId,habit:t[r].habitTitle,points:t[r].habitPoints,dates:t[r].dates,percentage:t[r].percentage});a.setState({habits:n})})},a.handleChange=function(e){a.setState({input:e.target.value})},a.addNewHabit=function(e){0!=a.state.input.length?(m.database().ref("habits").push({habitTitle:a.state.input,habitPoints:0,dates:{},percentage:0}),a.setState({error:!1})):a.setState({error:!0})},a.renderHabitList=function(e,t,a){var n=[];for(var s in e.dates)n.push(e.dates[s].pushDate);return r.a.createElement(T,{habits:a,percentage:e.percentage,title:e.habit,dates:n,oldDates:e.dates,points:e.points,newid:e.idkey})},a.state={daysInMonth:[],habits:[],loading:!0,input:"",error:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e;this.setState({daysInMonth:(e=30,Array.from({length:e},function(e,t){return t+1}))})}},{key:"componentDidMount",value:function(){this.setHabits()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error;return r.a.createElement(M,null,r.a.createElement("link",{href:"https://use.fontawesome.com/releases/v5.7.0/css/all.css",rel:"stylesheet"}),t&&r.a.createElement(f.a,{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"90vh"}},r.a.createElement("p",null,"Wczytywanie..."),r.a.createElement(b.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Wczytywanie..."))),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{style:{maxWidth:"900px"}},r.a.createElement("h2",{style:{padding:"20px 0"}},"Czerwiec")),r.a.createElement(f.a,{style:{maxWidth:"900px",display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},this.state.habits.map(this.renderHabitList)),r.a.createElement(g.a,{style:{marginTop:"20px",justifyContent:"center"}},r.a.createElement(y.a,{md:"auto"},a&&r.a.createElement("small",{style:{display:"block",textAlign:"left",color:"red"}},"pole jest wymagane *"),r.a.createElement(v.a,{className:"mb-3"},r.a.createElement(k.a,{ref:"taskInput",placeholder:"wpisz nazw\u0119...","aria-label":"wpisz nazw\u0119...","aria-describedby":"basic-addon2",onChange:this.handleChange,style:{boxShadow:"none"},className:a?"error":""}),r.a.createElement(v.a.Append,null,r.a.createElement(w.a,{onClick:this.addNewHabit,style:{borderColor:"#58a4b0",backgroundColor:"#58a4b0",boxShadow:"none"}},"dodaj nowy nawyk")))))))}}]),t}(n.Component);var H=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h2",{style:{margin:"20px 0"}},"Habit tracker")),r.a.createElement("main",null,r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(90);i.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.91021a17.chunk.js.map